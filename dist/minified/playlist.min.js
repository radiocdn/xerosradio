document.addEventListener("DOMContentLoaded",()=>{function a(a,b="",c=""){const d=document.createElement(a);return b&&(d.className=b),c&&!c.includes("<")?d.textContent=c:c&&(d.innerHTML=c),d}function b(a){if(!a)return"";const b=new Date(a);return isNaN(b)?a:b.toLocaleString()}function c(c){const d=c.artist||"Onbekend",f=c.title||"Onbekend nummer",g=b(c.played_at),h=c.album_cover&&c.album_cover.startsWith("http")?c.album_cover:e,i=a("div","playlist-item"),j=a("img");j.src=h,j.alt=`${d} - ${f}`,j.loading="lazy",j.decoding="async",j.draggable=!1,j.onerror=()=>{j.src=e};const k=a("div","details",`
            <h2>${d}</h2>
            <p>${f}</p>
            <p>${g}</p>
        `),l=a("div","spotify-youtube-container"),m=encodeURIComponent(`${d} - ${f}`),n=a("a");n.href=`https://open.spotify.com/search/${m}`,n.target="_blank",n.rel="noopener",n.innerHTML=`<i class="fab fa-spotify spotify-icon"></i>`;const o=a("a");o.href=`https://www.youtube.com/results?search_query=${m}`,o.target="_blank",o.rel="noopener",o.innerHTML=`<i class="fab fa-youtube youtube-icon"></i>`;const p=a("a");return p.href=`https://soundcloud.com/search?q=${m}`,p.target="_blank",p.rel="noopener",p.innerHTML=`<i class="fab fa-soundcloud soundcloud-icon"></i>`,l.append(n,o,p),i.append(j,k,l),i}const d=document.getElementById("playlist-container"),e="https://res.cloudinary.com/xerosradio/image/upload/f_webp,q_auto,w_200,h_200/XerosRadio_Logo_Achtergrond_Wit";(async function(){d.textContent="Laden van de Playlist...";try{const a=await fetch("https://xerosradioapiprd.global.ssl.fastly.net/playlist");if(!a.ok)throw new Error("Kan de afspeellijst niet laden.");const b=await a.json();if(!Array.isArray(b)||0===b.length)return void(d.innerHTML=`<p class="empty-message">Helaas, er zijn geen nummers gevonden.</p>`);d.innerHTML="";const e=document.createDocumentFragment();b.forEach(a=>{e.appendChild(c(a))}),d.appendChild(e)}catch(a){d.innerHTML=`<p>Fout bij het laden van de afspeellijst: ${a.message}</p>`,console.error(a)}})()});