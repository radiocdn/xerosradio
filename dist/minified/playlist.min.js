document.addEventListener("DOMContentLoaded",()=>{function a(a,b="",c=""){const d=document.createElement(a);return b&&(d.className=b),c&&(d.textContent=c),d}function b(a){if(!a)return"";const b=new Date(a);return isNaN(b)?a:b.toLocaleString()}function c(c){const d=c.artist||"Onbekend",f=c.title||"Onbekend nummer",g=b(c.played_at),h=c.album_cover&&c.album_cover.startsWith("http")?c.album_cover:e,i=a("div","playlist-item"),j=a("img");j.src=h,j.alt=`${d} - ${f}`,j.loading="lazy",j.decoding="async",j.draggable=!1,j.onerror=()=>{j.src=e};const k=a("div","details"),l=a("h2","",d),m=a("p","",f);let n=g;c.dj&&""!==c.dj.trim()&&(n+=` â€“ Door ${c.dj}`);const o=a("p","",n);k.append(l,m,o);const p=a("div","spotify-youtube-container"),q=encodeURIComponent(`${d} - ${f}`),r=document.createElement("a");r.href=`https://open.spotify.com/search/${q}`,r.target="_blank",r.rel="noopener",r.innerHTML=`<i class="fab fa-spotify spotify-icon"></i>`;const s=document.createElement("a");s.href=`https://www.youtube.com/results?search_query=${q}`,s.target="_blank",s.rel="noopener",s.innerHTML=`<i class="fab fa-youtube youtube-icon"></i>`;const t=document.createElement("a");return t.href=`https://soundcloud.com/search?q=${q}`,t.target="_blank",t.rel="noopener",t.innerHTML=`<i class="fab fa-soundcloud soundcloud-icon"></i>`,p.append(r,s,t),i.append(j,k,p),i}const d=document.getElementById("playlist-container"),e="https://res.cloudinary.com/xerosradio/image/upload/f_webp,q_auto,w_200,h_200/XerosRadio_Logo_Achtergrond_Wit";(async function(){d.textContent="Laden van de Playlist...";try{const b=await fetch("https://xr-api-prd.faststreamdiensten.nl/playlist");if(!b.ok)throw new Error("Kan de afspeellijst niet laden.");const e=await b.json();if(d.innerHTML="",!Array.isArray(e)||0===e.length){const b=a("p","empty-message","Helaas, er zijn geen nummers gevonden.");return void d.appendChild(b)}const f=document.createDocumentFragment();e.forEach(a=>{f.appendChild(c(a))}),d.appendChild(f)}catch(b){const c=a("p","",`Fout bij het laden van de afspeellijst: ${b.message}`);d.innerHTML="",d.appendChild(c),console.error(b)}})()});